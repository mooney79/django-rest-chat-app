(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{22:function(e,t,n){},25:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),r=n(17),c=n.n(r),o=(n(22),n(23),n(11)),i=n(3),u=n.n(i),l=n(6),b=n(4),j=(n(25),n(7)),m=n(2),d=n(0);var p=function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("button",{className:"nav-button btn",type:"button",onClick:function(t){e.setSelection(e.value),document.querySelectorAll("button").forEach((function(e){e.style.border="none",e.style.background="white"}));var n=t.target;n.style.border="dashed black 2px",n.style.background="rgba(0,0,0,0.1)"},children:["\u2014 ",e.value," \u2014"]},e.value)})},f=n(5),h=n.n(f);var O=function(e){var t,n=Object(s.useState)(!1),a=Object(b.a)(n,2),r=a[0],c=a[1],i=Object(s.useState)({name:""}),f=Object(b.a)(i,2),O=f[0],x=f[1],g=e.rooms.map((function(t){return Object(d.jsx)(p,{value:t.name,setSelection:e.setSelection,selection:e.selection},t.name)}));function v(){return(v=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api_v1/chat/rooms/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":h.a.get("csrftoken")},body:JSON.stringify(n)}).catch(console.log("Something went wrong"));case 2:t.sent.ok&&(console.log("New Room Created!"),e.setRooms([].concat(Object(o.a)(e.rooms),[[O]])),e.fetchRooms(),x(""));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return t=r?Object(d.jsxs)("form",{className:"row",onSubmit:function(e){e.preventDefault(),function(e){v.apply(this,arguments)}(O),c(!1),console.log(r)},children:[Object(d.jsx)("input",{className:"col-10",type:"text",id:"name",name:"name",value:O.name,onChange:function(e){var t=e.target,n=t.name,s=t.value;x((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},n,s))}))}}),Object(d.jsx)("button",{className:"nav-button btn new-btn col-10",type:"submit",children:"Add Room"},"new_room")]}):Object(d.jsx)("button",{id:"new-room",className:"nav-button btn new-btn",type:"button",onClick:function(e){console.log("Create a new room dialogue here!"),c(!0),console.log(r)},children:" +New+"},"new_room"),Object(d.jsxs)("div",{className:"nav-bar col-2 btn-group-vertical",children:[g,t]})};var x=function(e){var t=Object(s.useState)(""),n=Object(b.a)(t,2),a=n[0],r=n[1],c=Object(s.useState)(!1),i=Object(b.a)(c,2),j=i[0],m=i[1];function p(){return(p=Object(l.a)(u.a.mark((function t(n){var s,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api_v1/chat/msgs/".concat(n,"/"),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":h.a.get("csrftoken")}});case 2:if(t.sent.ok){t.next=5;break}throw new Error("Network response was not ok");case 5:s=e.msgs.findIndex((function(e){return e.id===n})),(a=Object(o.a)(e.msgs)).splice(s,1),e.setMsgs(a);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return f=Object(l.a)(u.a.mark((function t(n,s){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.msgs.findIndex((function(e){return e.id===n})),(r=Object(o.a)(e.msgs))[a].text=s,e.setMsgs(r),t.next=6,fetch("/api_v1/chat/msgs/".concat(n,"/"),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":h.a.get("csrftoken")},body:JSON.stringify(r[a])});case 6:if(t.sent.ok){t.next=9;break}throw new Error("Network response was not ok");case 9:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}var O=Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){f.apply(this,arguments)}(e.id,a),r(a),m(!1)},children:[Object(d.jsx)("input",{type:"text",name:"newText",value:a,onChange:function(e){r(e.target.value)}}),Object(d.jsx)("button",{type:"submit",children:"Update"})]}),x=Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:Object(d.jsx)("span",{className:"user mt-4",children:e.sender})}),Object(d.jsx)("p",{className:"message",children:e.text}),Object(d.jsx)("button",{type:"button",onClick:function(){return m(!0)},children:"Edit"}),Object(d.jsx)("button",{type:"button",onClick:function(){return function(e){return p.apply(this,arguments)}(e.id)},children:" Delete "})]});return Object(d.jsxs)("li",{children:[" ",j?O:x]})};var g=function(e){var t=e.msgs.filter((function(t){return e.selection===t.room_assoc})).map((function(t){return Object(d.jsx)(x,Object(m.a)(Object(m.a)({},t),{},{msgs:e.msgs,setMsgs:e.setMsgs}),t.id)}));return Object(d.jsx)("div",{className:"chatroom col-12",children:t})};var v=function(){return Object(s.useEffect)((function(){var e=document.getElementById("canvas3").getContext("2d");e.moveTo(30,20),e.beginPath();var t=30,n=20,s=0;function a(){e.arc(t,n,2,0,2*Math.PI),e.strokeStyle="transparent",e.stroke()}!function(){for(var e=0;e<75;e++)s++,a(),s>3&&(s=0,t--),n++;for(var r=0;r<25;r++)t++,a();for(var c=0;c<50;c++)s++,a(),s>3&&(s=0,t++),n--;for(var o=0;o<50;o++)s++,a(),s>3&&(s=0,t++),n++;for(var i=0;i<25;i++)t++,a();for(var u=0;u<75;u++)s++,a(),s>3&&(s=0,t--),n--;for(var l=0;l<35;l++)t--,a()}();var r=0,c=0;!function t(n){n>r+100&&(e.fillStyle="hsl("+c+", 100%, 50%)",e.fill(),r=n,c+=1),requestAnimationFrame(t)}()}),[]),Object(d.jsxs)("header",{children:[Object(d.jsx)("canvas",{id:"canvas3",width:"100",height:"108"}),Object(d.jsx)("h1",{children:" Slacks!"}),Object(d.jsx)("p",{children:"The premier chat app for afficionados of fine gentleman's trousers"})]})};var w=function(e){var t=function(t){var n=t.target,s=n.name,a=n.value;e.setUser((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},s,a))}))};return Object(d.jsxs)("form",{className:"mt-3",onSubmit:function(t){t.preventDefault(),e.handleLogin(e.user),e.setUser(e.user)},children:[Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"username",children:"Username"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter username",required:!0,name:"username",onChange:t,value:e.user.username})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Enter Password",required:!0,name:"password",onChange:t,value:e.user.password})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Login"}),Object(d.jsx)("button",{type:"button",onClick:function(t){e.setRegister(!0)},className:"btn btn-primary mt-3",children:"Register"})]})};var y=function(e){var t=Object(s.useState)({username:"",email:"",password1:"",password2:""}),n=Object(b.a)(t,2),a=n[0],r=n[1],c=Object(s.useState)(null),o=Object(b.a)(c,2),i=o[0],p=o[1],f=function(e){var t=e.target,n=t.name,s=t.value;r((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},n,s))}))},O=function(e){return console.warn(e)},x=function(){var t=Object(l.a)(u.a.mark((function t(n){var s,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":h.a.get("csrftoken")},body:JSON.stringify(n)},t.next=3,fetch("/rest-auth/registration/",s).catch(O);case 3:if(!0!==!(a=t.sent)){t.next=8;break}console.warn(a),t.next=14;break;case 8:return t.next=10,a.json();case 10:r=t.sent,h.a.set("Authorization","Token ".concat(r.key)),e.setRegister(!1),e.setLogged(!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsxs)("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),a.password1!==a.password2?p("Passwords do not match!"):x(a)},children:[Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"username",children:"Username"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter username",required:!0,name:"username",onChange:f,value:a.username})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"email",children:"E-mail"}),Object(d.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter email",required:!0,name:"email",onChange:f,value:a.email})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password1",placeholder:"Enter Password",required:!0,name:"password1",onChange:f,value:a.password1})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password2",placeholder:"Confirm Password",required:!0,name:"password2",onChange:f,value:a.password2}),Object(d.jsx)("span",{className:"text-danger mt-2",children:i})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Register"})]})},k=n(32),S=n(33);var N=function(e){var t=Object(s.useState)(""),n=Object(b.a)(t,2),a=n[0],r=n[1];return Object(d.jsxs)(k.a,{children:[Object(d.jsx)(S.a,{as:"textarea","aria-label":"With textarea",name:"message",onChange:function(e){r(e.target.value)},value:a}),Object(d.jsx)(k.a.Text,{onClick:function(){console.log(a),e.submitMsg(e.selection,a),r("")},children:"Send"})]})};var C=function(){var e=Object(s.useState)("Home"),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)({pk:0,username:"Filler"}),c=Object(b.a)(r,2),i=c[0],j=c[1],m=Object(s.useState)(!1),p=Object(b.a)(m,2),f=p[0],x=p[1],k=Object(s.useState)(!1),S=Object(b.a)(k,2),C=S[0],T=S[1],F=Object(s.useState)([]),R=Object(b.a)(F,2),E=R[0],P=R[1],M=Object(s.useState)([]),_=Object(b.a)(M,2),A=_[0],q=_[1];function L(){return U.apply(this,arguments)}function U(){return(U=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api_v1/chat/rooms/");case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,P(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api_v1/chat/msgs/");case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,q(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/user/",{headers:{"Content-Type":"application/json","X-CSRFToken":h.a.get("csrftoken")}});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,j(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return I=Object(l.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/login/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":h.a.get("csrftoken")},body:JSON.stringify(t)});case 2:if(!0!==!(n=e.sent)){e.next=7;break}console.warn(n),e.next=13;break;case 7:return e.next=9,n.json();case 9:s=e.sent,h.a.set("Authorization","Token ".concat(s.key)),console.warn(s.key),s.key&&!f?x(!0):h.a.remove("Authorization");case 13:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function z(){return z=Object(l.a)(u.a.mark((function e(t,n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={room_assoc:t,sender:i.username,text:n},console.log(s),e.next=4,fetch("/api_v1/chat/msgs/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":h.a.get("csrftoken")},body:JSON.stringify(s)}).catch(console.log("Something went wrong"));case 4:e.sent.ok&&(console.log("Message Submitted!"),q([[s]].concat(Object(o.a)(A))),D());case 6:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}return Object(s.useEffect)((function(){h.a.get("Authorization")?x(!0):x(!1),L(),D(),function(){X.apply(this,arguments)}()}),[]),f?Object(d.jsxs)("div",{className:"App container",children:[Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-12",children:Object(d.jsx)(v,{})})}),Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)(O,{selection:n,setSelection:a,rooms:E,setRooms:P,fetchRooms:L}),Object(d.jsxs)("div",{className:"stacked col-10",children:[Object(d.jsx)(g,{msgs:A,setMsgs:q,selection:n}),Object(d.jsx)(N,{selection:n,user:i,msgs:A,setMsgs:q,submitMsg:function(e,t){return z.apply(this,arguments)}})]})]}),Object(d.jsx)("button",{onClick:function(){h.a.remove("Authorization"),x(!1)},children:"logout"})]}):!0===C?Object(d.jsx)(y,{setRegister:T,setUser:j,setLogged:x}):Object(d.jsx)("div",{children:Object(d.jsx)(w,{handleLogin:function(e){return I.apply(this,arguments)},user:i,setUser:j,setRegister:T})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),s(e),a(e),r(e),c(e)}))};c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root")),T()}},[[30,1,2]]]);
//# sourceMappingURL=main.3d3341ff.chunk.js.map